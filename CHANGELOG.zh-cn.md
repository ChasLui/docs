# 更新日志

本项目的所有重要更改都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/en/1.0.0)，
并且本项目遵循 [语义化版本](https://semver.org/spec/v2.0.0.html)。

## [未发布]

## 新增

- 📝(文档) 在 README 中添加 GNU Make 链接 #750
- ✨(前端) 在文档详情页面添加置顶功能 #711
- 🚩(前端) 复制为 HTML 时的分析功能开关 #649
- ✨(前端) 自定义块分隔符并支持导出 #698
- 🌐(国际化) 激活荷兰语支持 #742

## 更改

- 🧑‍💻(前端) 更改开源部分的字面表述 #702
- ♻️(前端) 替换导出功能的 CORS 代理 #695
- 🚨(gitlint) 允许提交信息中使用大写字母 #756

## 修复

- 🐛(前端) SVG 导出问题 #706
- 🐛(前端) 移除表格内容的滚动监听器 #688
- 🔒️(后端) 限制对 favorite_list 端点的访问 #690
- 🐛(后端) 重构以修复子视图和后代视图的过滤问题 #695
- 🐛(action) 修复 notify-argocd 工作流 #713
- 🚨(helm) 修复 helmfile 检查 #736
- 🚚(前端) 401 错误时重定向到 401 页面 #759

## [2.4.0] - 2025-03-06

## 新增

- ✨(前端) 同步语言选择 #401
- ✨(前端) 在 AI 转换中添加美化操作 #478
- ✨(前端) 在 AI 转换中添加表情符号化操作 #478

## 更改

- 使用 sentry 标签替代额外作用域
- ♻️(前端) 改进 AI 翻译功能 #478

## 修复

- 🐛(前端) 修复协作错误 #684

## [2.3.0] - 2025-03-03

## 新增

- ✨(后端) 根据祖先限制链接范围/角色选择选项 #645
- ✨(后端) 在文档 API 端点添加新的"后代"操作 #645
- ✨(后端) 在文档详情端点添加新的"树"操作 #645
- ✨(后端) 允许在限制范围内强制设置页面大小 #645
- 💄(前端) 添加错误页面 #643
- 🔒️ 管理不安全附件 #663
- ✨(前端) 自定义块引用并支持导出 #646
- ✨(前端) 在主页添加开源部分 #666
- ✨(前端) 同步语言选择 #401

## 更改

- 🛂(前端) 恢复版本可见性 #629
- 📝(文档) 改进 README.md 的格式和措辞
- ♻️ 停止在创建文档时设置默认标题 #634
- ♻️(前端) 各种 UI 改进 #644

## 修复

- 🐛(后端) 允许下载任何类型的媒体文件扩展名 #671
- ♻️(前端) 改进表格 PDF 渲染
- 🐛(邮件) 接收者语言的邀请邮件

## [2.2.0] - 2025-02-10

## 新增

- 📝(文档) 添加 security.md 和 codeofconduct.md #604
- ✨(前端) 添加主页 #608
- ✨(前端) 活动时显示光标 #609
- ✨(前端) 添加导出分页符 #623

## 更改

- 🔧(后端) 使 AI 功能范围可配置 #628

## 修复

- 🌐(CI) 修复部分翻译的邮件 #616
- 🐛(前端) 修复光标换行问题 #609
- 🐛(前端) 修复 PDF 导出样式 #609

## [2.1.0] - 2025-01-29

## 新增

- ✨(后端) 为文档添加软删除和恢复 API 端点 #516
- ✨(后端) 允许以树形结构组织文档 #516
- ✨(后端) 在文档列表序列化器中添加"摘要"字段 #516
- ✨(后端) 添加管理 Crowdin 工作流的 GitHub Actions #559 & #563
- 📈 集成 Posthog #540
- 🏷️(后端) 为上传的文件添加内容类型 #552
- ✨(前端) 导出 PDF 和 DOCX 文档 #537

## 更改

- 💄(前端) 在文档行添加功能 #581
- 💄(前端) 改进 DocsGridItem 响应式内边距 #582
- 🔧(后端) 将最大页面大小提升至 200 #516
- 📝(文档) 改进 README #558

## 修复

- 🐛 修复邀请功能 #575

## 移除

- 🔥(后端) 从列表序列化器中移除"内容"字段 #516

## [2.0.1] - 2025-01-17

## 修复

- 🐛(前端) 在没有权限时显示分享模态框 #557
- 🐛(前端) 标题复制导致应用崩溃 #564

## [2.0.0] - 2025-01-13

## 新增

- 🔧(后端) 添加配置必要 OIDC 声明列表的选项 #525 & #531
- 🔧(helm) 添加禁用默认 TLS 设置的选项 #519
- 💄(前端) 添加左侧面板 #420
- 💄(前端) 在左侧面板添加过滤功能 #475
- ✨(前端) 新的分享模态框 UI #489
- ✨(前端) 添加收藏功能 #515
- 📝(文档) 自托管安装文档 #530
- ✨(helm) helm 版本控制 #530

## 更改

- 🏗️(yjs-server) 组织 yjs 服务器 #528
- ♻️(前端) 更好地分离协作流程 #528
- 💄(前端) 更新响应式头部和左侧面板 #421
- 💄(前端) 更新 DocsGrid 组件 #431
- 💄(前端) 更新 DocsGridOptions 组件 #432
- 💄(前端) 更新 DocHeader UI #448
- 💄(前端) 更新文档版本控制 UI #463
- 💄(前端) 更新文档摘要 UI #473
- 📝(文档) 更新 readme.md 以匹配 V2 更改 #558 & #572

## 修复

- 🐛(后端) 修复通过 s2s 创建文档时子未知但找到邮箱的问题 #543
- 🐛(前端) 未认证时隐藏搜索和创建文档按钮 #555
- 🐛(后端) 创建时的竞态条件问题 #556

## [1.10.0] - 2024-12-17

## 新增

- ✨(后端) 添加服务器到服务器 API 端点以创建文档 #467
- ✨(邮件) 白标邮件 #412
- ✨(y-provider) 创建 Markdown 转换器端点 #488

## 更改

- ⚡️(docker) 改进 y-provider 镜像 #422

## 修复

- ⚡️(e2e) 减少端到端测试的不稳定性 #511
- 🐛(前端) 更新文档编辑器高度 #481
- 💄(前端) 添加文档搜索 #485

## [1.9.0] - 2024-12-11

## 新增

- ✨(后端) 在列表视图中标注文档访问次数 #429
- ✨(后端) 允许用户标记/取消标记文档为收藏 #429

## 更改

- 🔒️(协作) 增加协作访问安全性 #472
- 🔨(前端) 将标题封装到独立组件 #474
- ⚡️(后端) 优化文档列表视图的查询次数 #429
- ♻️(前端) 停止使用带版本的提供者 #480
- 🚚(协作) 更改 WebSocket 密钥名称 #480

## 修复

- 🐛(前端) 修复协作时的初始内容 #484
- 🐛(前端) 修复 Firefox 中的隐藏菜单 #468
- 🐛(后端) 修复 IA 清理问题 #490

## [1.8.2] - 2024-11-28

## 更改

- ♻️(SW) 更改 HTML 缓存策略 #460

## [1.8.1] - 2024-11-27

## 修复

- 🐛(前端) Firefox 中链接不可点击和闪烁问题 #457

## [1.8.0] - 2024-11-25

## 新增

- 🌐(后端) 添加德语翻译 #259
- 🌐(前端) 添加德语翻译 #255
- ✨(前端) 添加广播存储 #387
- ✨(后端) 白名单 Pod 的 IP 地址 #443
- ✨(后端) 配置端点 #425
- ✨(前端) 配置端点 #424
- ✨(前端) 添加 Sentry #424
- ✨(前端) 添加 Crisp 聊天机器人 #450

## 更改

- 🚸(后端) 改进用户相似度搜索和结果排序 #391
- ♻️(前端) 简化存储 #402
- ✨(前端) 更新 $css Box props 类型以添加样式化组件 RuleSet #423
- ✅(CI) trivy 出错时继续执行 #453

## 修复

- 🔧(后端) 修复 Docker 日志记录并使其可通过环境变量配置 #427
- 🦺(后端) 在 sub 正则表达式中添加逗号 #408
- 🐛(编辑器) 只读时隐藏协作用户标签 #385
- 🐛(前端) 用户在被撤销后仍有查看权限 #387
- 🐛(前端) 修复双击时的占位符可编辑问题 #454

## [1.7.0] - 2024-10-24

## 新增

- 📝 添加 Contributing.md #352
- 🌐(前端) 为编辑器添加本地化 #368
- ✨ 公共和受限文档可编辑 #357
- ✨(前端) 如果可用则添加全名 #380
- ✨(后端) 添加查看访问权限 #376

## 更改

- ♻️(前端) 如果用户有权限则列出访问权限 #376
- ♻️(前端) 避免在搜索引擎中索引文档 #372
- 👔(后端) 默认限制文档访问 #388

## 修复

- 🐛(后端) 需要管理文档访问权限才能查看邀请 #369
- 🐛(国际化) 使用共享 cookie 的前端和后端语言 #365
- 🐛(前端) 添加默认工具栏按钮 #355
- 🐛(前端) 正确显示节流错误 #378

## 移除

- 🔥(helm) 移除基础设施相关代码 #366

## [1.6.0] - 2024-10-17

## 新增

- ✨ 在文档编辑器中添加 AI 功能 #250
- ✨(后端) 允许上传更多类型的附件 #309
- ✨(前端) 添加将文档复制到剪贴板为 HTML/Markdown 的按钮 #318

## 更改

- ♻️(前端) 更好地支持多主题 #325
- ♻️ 引导前端 #257
- ♻️ 在邮件中添加用户名 #314

## 修复

- 🛂(后端) 禁用时不重复用户
- 🐛(前端) 移除用户后使查询失效 #336
- 🐛(后端) 修复文档创建时的权限问题 #329
- 🐛(后端) 修复 nginx docker 容器 #340
- 🐛(前端) 修复 Firefox 中的复制粘贴问题 #353

## [1.5.1] - 2024-10-10

## 修复

- 🐛(数据库) 修复用户重复问题 #316

## [1.5.0] - 2024-10-09

## 新增

- ✨(后端) 添加与 OIDC 同步的用户名字段 #301
- ✨(CI) 添加安全扫描 #291
- ♻️(前端) 添加版本控制 #277
- ✨(前端) 一键创建文档 #275
- ✨(前端) 内联编辑标题 #275
- 📱(前端) 移动端响应式 #304
- 🌐(前端) 更新翻译 #308

## 更改

- 💄(前端) 编辑器中的错误提示可关闭 #284
- ♻️(后端) 更改邮件内容 #283
- 🛂(前端) 查看者和编辑者可以访问分享模态框 #302
- ♻️(前端) 移除文档编辑器中的页脚 #313

## 修复

- 🛂(前端) 如果没有现有用户匹配 sub 则匹配邮箱
- 🐛(后端) GitLab OICD userinfo 端点 #232
- 🛂(前端) 私有文档且未认证时重定向到 OIDC #292
- ♻️(后端) 获取用户可用的文档版本列表 #258
- 🔧(后端) 修复配置以避免不同的 SSL 警告 #297
- 🐛(前端) 修复编辑器换行不工作的问题 #302

## [1.4.0] - 2024-09-17

## 新增

- ✨ 添加公共/认证/受限访问链接，支持读取/编辑角色 #234
- ✨(前端) 添加复制链接按钮 #235
- 🛂(前端) 允许未登录访问公共文档 #235

## 更改

- ♻️(后端) 允许文档标题为空以便于创建 #234
- 🛂(后端) 停止向所有人列出公共文档 #234
- 🚚(前端) 更改分享模态框中的可见性 #235
- ⚡️(前端) 改进摘要 #244

## 修复

- 🐛(后端) 修复通过 API 端点创建文档时强制 ID 的问题 #234
- 🐛 从 Makefile 重建前端开发容器 #248

## [1.3.0] - 2024-09-05

## 新增

- ✨ 添加带访问控制的图片附件
- ✨(前端) 上传图片到文档 #211
- ✨(前端) 摘要功能 #223
- ✨(前端) 更新文档页面的元标题 #231

## 更改

- 💄(前端) 编辑器中代码背景变暗 #214
- 🔥(前端) 如果不是文本则隐藏 Markdown 按钮 #213

## 修复

- 🐛 修复 PDF 导出中的表情符号 #225
- 🐛 修复文档协作 #226
- 🐛 (docker) 修复与 Mac 的兼容性 #230

## 移除

- 🔥(前端) 移除保存模态框 #213

## [1.2.1] - 2024-08-23

## 更改

- ♻️ 更改文档数据网格排序 #195
- 🔥(helm) 使用 scaleway 邮件 #194

## [1.2.0] - 2024-08-22

## 新增

- 🎨(前端) 改进编辑器到 PDF 的转换 #151
- ✨ 导出 DOCX (Word) #161
- 🌐 国际化邀请邮件 #167
- ✨(前端) 白标功能 #164
- ✨ 添加用户到文档时发送邮件邀请 #171
- ✨ 邀请管理 #174

## 修复

- 🐛(y-webrtc) 修复连接问题 #147
- ⚡️(前端) 改进分享选择稳定性 #159
- 🐛(后端) 发送邮件时启用 SSL #165

## 更改

- 🎨(前端) 停止将布局高度限制为屏幕大小 #158
- ⚡️(CI) 仅 Chrome 端到端测试为必需 #177

## 移除

- 🔥(helm) 移除 htaccess #181

## [1.1.0] - 2024-07-15

## 新增

- 🤡(演示) 为开发用户生成虚拟文档 #120
- ✨(前端) 创建侧边模态框组件 #134
- ✨(前端) 文档网格操作（更新/删除）#136
- ✨(前端) 文档编辑器头部信息 #137

## 更改

- ♻️(前端) 用文档网格替换文档面板 #120
- ♻️(前端) 从模态框创建文档 #132
- ♻️(前端) 从分享模态框管理成员 #140

## [1.0.0] - 2024-07-02

## 新增

- 🛂(前端) 管理文档权限 (#75)
- ✨(前端) 更新文档 (#68)
- ✨(前端) 删除文档 (#68)
- 🐳(docker) 容器化开发前端 (#63)
- 👔(后端) 使用邮箱过滤列出用户 (#79)
- ✨(前端) 添加用户到文档 (#52)
- ✨(前端) 邀请用户到文档 (#52)
- 🛂(前端) 管理成员（更新角色/列表/移除）(#81)
- ✨(前端) 离线模式 (#88)
- 🌐(前端) 翻译 CGU (#83)
- ✨(service-worker) 离线文档管理 (#94)
- ⚗️(前端) 在 logo 上添加测试版标签 (#121)

## 更改

- ♻️(前端) 将站点从 Impress 改为 Docs (#76)
- ✨(前端) 从模态框生成 PDF (#68)
- 🔧(helm) 为信令服务器设置基于 request_uri 的粘性会话 (#78)
- ♻️(前端) 更改 logo (#84)
- ♻️(前端) PDF 包含文档标题 (#84)
- ⚡️(e2e) 测试间唯一登录 (#80)
- ⚡️(CI) 改进端到端任务 (#86)
- ♻️(前端) 改进错误和消息信息 UI (#93)
- ✏️(前端) 将所有 pad 改为 doc (#99)

## 修复

- 🐛(前端) 修复生成 PDF 时的换行问题 (#84)

## 删除

- 💚(CI) 移除 CI 上的标签推送触发工作流 (#68)
- 🔥(前端) 移除即将推出页面 (#121)

## [0.1.0] - 2024-05-24

## 新增

- ✨(前端) 即将推出页面 (#67)
- 🚀 Impress，一个易于协作管理文档的项目。

[unreleased]: https://github.com/numerique-gouv/impress/compare/v2.3.0...main
[v2.3.0]: https://github.com/numerique-gouv/impress/releases/v2.3.0
[v2.2.0]: https://github.com/numerique-gouv/impress/releases/v2.2.0
[v2.1.0]: https://github.com/numerique-gouv/impress/releases/v2.1.0
[v2.0.1]: https://github.com/numerique-gouv/impress/releases/v2.0.1
[v2.0.0]: https://github.com/numerique-gouv/impress/releases/v2.0.0
[v1.10.0]: https://github.com/numerique-gouv/impress/releases/v1.10.0
[v1.9.0]: https://github.com/numerique-gouv/impress/releases/v1.9.0
[v1.8.2]: https://github.com/numerique-gouv/impress/releases/v1.8.2
[v1.8.1]: https://github.com/numerique-gouv/impress/releases/v1.8.1
[v1.8.0]: https://github.com/numerique-gouv/impress/releases/v1.8.0
[v1.7.0]: https://github.com/numerique-gouv/impress/releases/v1.7.0
[v1.6.0]: https://github.com/numerique-gouv/impress/releases/v1.6.0
[1.5.1]: https://github.com/numerique-gouv/impress/releases/v1.5.1
[1.5.0]: https://github.com/numerique-gouv/impress/releases/v1.5.0
[1.4.0]: https://github.com/numerique-gouv/impress/releases/v1.4.0
[1.3.0]: https://github.com/numerique-gouv/impress/releases/v1.3.0
[1.2.1]: https://github.com/numerique-gouv/impress/releases/v1.2.1
[1.2.0]: https://github.com/numerique-gouv/impress/releases/v1.2.0
[1.1.0]: https://github.com/numerique-gouv/impress/releases/v1.1.0
[1.0.0]: https://github.com/numerique-gouv/impress/releases/v1.0.0
[0.1.0]: https://github.com/numerique-gouv/impress/releases/v0.1.0